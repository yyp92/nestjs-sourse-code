version: '3.8'
services:
    nest-app:
        build:
            context: ./
            dockerfile: ./Dockerfile
        depends_on:
            - mysql-container
            - redis-container
        ports:
            - 3005:3005
        networks:
            - common-network
    mysql-container:
        image: mysql
        volumes:
            # mac
            - /Users/guang/mysql-data:/var/lib/mysql
            # windows 适合本地开发是windows电脑
            # - D:\\docker-demo:/var/lib/mysql
        environment:
            MYSQL_DATABASE: meeting_room_booking_system
            MYSQL_ROOT_PASSWORD: 123456
            MYSQL_USER: root
            MYSQL_PASSWORD: 123456
            MYSQL_ROOT_HOST: "%"
        networks:
            - common-network
    redis-container:
        image: redis
        volumes:
            # mac
            - /Users/guang/redis-data:/data
            # windows 适合本地开发是windows电脑
            # - D:\\docker-demo\\redis:/data
        networks:
            - common-network
networks:
    common-network:
        driver: bridge
